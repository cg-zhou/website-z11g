<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Chunguang Zhou</title>
    <link rel="stylesheet" type="text/css" href="/content/css/site.css?v=20180827">
    <link rel="icon" href="/content/images/favicon.ico" type="image/x-icon">

    <!-- 引入样式 -->
    <link rel="stylesheet" href="../../Content/3rdPartyLibs/element-ui/index.css">

    <style>
        .mini-logo {
            border-radius: 50%;
            width: 120px;
            height: 120px;
            background-size: 120px;
            float: left;
            background-image: url(../../Content/images/duck.jpg);
            margin-top: 40px;
            cursor: pointer;
            box-shadow: inset 0 0 0 8px rgba(255, 255, 255, .6), 0 1px 2px rgba(0, 0, 0, .1);
        }

        .mini-logo-size {
            border-radius: 50%;
            margin-left: auto;
            margin-right: auto;
            max-width: 1000px;
            height: 100px;
            padding-left: 20px;
            padding-right: 20px;
        }

        .mini-icon-link {
            margin-top: 50px;
            float: right;
            margin-right: 20px;
        }

            .mini-icon-link img {
                width: 40px;
            }

    </style>
</head>

<body>
    <!-- import Vue before Element -->
    <script src="../../Content/3rdPartyLibs/vue/vue.js"></script>
    <!-- import JavaScript -->
    <script src="../../Content/3rdPartyLibs/element-ui/index.js"></script>

    <script src="../../Content/3rdPartyLibs/axios/axios.min.js"></script>

    <header class="header" style="height:100px;">
        <div class="mini-logo-size">
            <a href="/">
                <div class="mini-logo">
                </div>
            </a>

            <div class="mini-icon-link">
                <a class="footer-link" target="_blank" href="https://github.com/cg-zhou">
                    <img src="/content/images/github.png" alt="github">
                </a>
            </div>

            <div class="mini-icon-link">
                <a class="footer-link" href="mailto:z_cg@foxmail.com">
                    <img src="/content/images/email.png" alt="email">
                </a>
            </div>

        </div>
    </header>

    <div id="app"
         v-cloak
         style="background-color:white;padding-top:100px;padding-bottom:100px;">

        <div style="max-width:1000px;margin-left:auto;margin-right:auto;">

            <el-form ref="form" :model="form" label-width="300px">
                <el-form-item label="税前收入（月）">
                    <el-input v-model="form.income" style="width: 500px;"></el-input>
                </el-form-item>
                <el-form-item label="社保和公积金（月）">
                    <el-input v-model="form.incomeWithoutTax" style="width: 500px;"></el-input>
                </el-form-item>
                <el-form-item>
                    <el-button type="primary" @@click="calc">计算</el-button>
                    <el-button>清空</el-button>
                </el-form-item>
                <el-form-item label="计算结果">
                    <div>{{"10月1日前需缴税 " + taxBefore2018 + " 元"}}</div>
                    <div>{{"10月1日后需缴税 " + taxAfter2018 + " 元"}}</div>
                    <div>
                        <span>
                            {{"每月减少缴税 "}}
                        </span>
                        <span v-if="difference>0" style="color:red;">
                            {{difference}}
                        </span>
                        <span v-else>
                            {{difference}}
                        </span>
                        <span>
                            {{" 元"}}
                        </span>
                    </div>

                    <div>
                        <span>
                            {{"每年减少缴税 "}}
                        </span>
                        <span v-if="differenceYear>0" style="color:red;">
                            {{differenceYear}}
                        </span>
                        <span v-else>
                            {{differenceYear}}
                        </span>
                        <span>
                            {{" 元"}}
                        </span>
                    </div>

                </el-form-item>
            </el-form>


        </div>

    </div>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue!',
                visible: false,

                form: {
                    income: 0,
                    incomeWithoutTax: 0,
                },
                taxBefore2018: 0,
                taxAfter2018: 0,
                difference: 0,
                differenceYear: 0,


            },
            methods: {
                calc: function () {
                    var self = this;
                    axios.post('/CalcTax/Run', this.form)
                        .then(function (response) {
                            console.log(response);
                            self.taxBefore2018 = response.data.resultBefore2018.SumTax;
                            self.taxAfter2018 = response.data.resultAfter2018.SumTax;
                            self.difference = response.data.difference;
                            self.differenceYear = response.data.differenceYear;
                            
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                },
                clear: function () {
                    this.form.income = '';
                    this.form.incomeWithoutTax = '';
                }
            }
        })
    </script>

    <footer class="footer">
        <div class="footer-row">
            Written by
            <a class="footer-link" href="mailto:z_cg@foxmail.com">Chunguang Zhou</a>
        </div>
        <div class="footer-row">
            <a class="footer-link" target="_blank" href="http://www.miitbeian.gov.cn">辽ICP备18012467号</a>
        </div>
    </footer>
</body>

</html>
